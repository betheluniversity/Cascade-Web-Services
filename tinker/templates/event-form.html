{% extends "event-form-base.html" %}

{% block title %}Event Form{% endblock %}

{% block styles %}
  <style type="text/css">
    .largeselect {
      height: 100px;
      font-size:14px;
    }
  </style>
{% endblock %}

{% block page_title %}
  {% if add_form %}
    Add a new event
  {% else %}
    Edit your event
  {% endif %}
{% endblock %}

{% block main_content %}

  <div class="row">
  <div class="large-12 columns">
    {% if add_form %}
      <form id="eventform" action="/submit" method="post">
    {% else %}
      <form id="eventform" action="/submit-edit" method="post">
      <input type="hidden" name="event_id" id="event_id" value="{{ event_id }}"/>
    {% endif %}

        {{ form.hidden_tag() }}
        {% for field in form if field.widget.input_type != 'hidden' %}

        {# Print any errors for this field#}
          {% for error in form.errors[field.name] %}
            <div class="alert alert-error">
              <div data-alert class="alert-box alert radius">
                {{ error }}
                <a href="#" class="close">&times;</a>
              </div>
            </div>
          {% endfor %}

          {# print the label #}
          {% if field.name not in ["off_campus_location", "on_campus_location", "other_on_campus"] %}
            <label for="{{ field.name }}">
              {{ field.label.text }}
              {% if field.flags.required %} <small>required</small> {% endif %}
             </label>
          {% endif %}



          {# Print the field #}
          {% if field.type == "SelectMultipleField" %}
            {{ field(size=10, class="largeselect") }}

          {% elif field.type == "HeadingField" %}
            <h3>{{ field.label }}</h3>

          {% elif field.name == "off_campus_location" %}
            <div id="off_location_wrap" style="display:none;">
              {{ field.label }}{{ field }}
            </div>

          {% elif field.name == "on_campus_location" %}
            <div id="on_campus_wrap" style="display:none;">
              {{ field.label }}{{ field }}
            </div>

          {% elif field.name == "other_on_campus" %}
            <div id="other_wrap" style="display:none;">
              {{ field.label }}{{ field }}
            </div>


          {% elif field.type == "SelectField" %}
            {{ field }}

          {% elif field.type == "CKEditorTextAreaField" %}
            {{ field(class="ckeditor") }}

          {% elif field.type == "DateTimeField" %}
            {# do the entire date field in here for now #}
            {{ datetime_fieldset() }}

          {% else %}
              {{ field(size=20) }}
          {% endif %}

        {% endfor %}
        <button type="submit" id="event-submit-btn" class="button postfix">Submit</button>
    </form>
  </div>
</div>

{% endblock %}


