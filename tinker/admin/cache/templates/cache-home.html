{% extends "tinker-base.html" %}

{% block title %}Clear Cache{% endblock %}

{% block page_title %}Bethel University Tinker{% endblock %}

{% block main_content %}

    <div class="large-6 columns">
        <label>Path
            <input type="text" value='/' id="cpath"/>
        </label>
        <a id="submit" class="button">Submit</a>
        <div id="output"></div>
    </div>

    <script>
        function submitpath() {
            var urlpath = $("#cpath").val();
            var input_data = {'url': urlpath,
                              'csrf_token': document.getElementById("csrf_token").value};
            var cacheurl = "{{ url_for('CacheBlueprint.CacheClear:submit') }}";
            $.post(cacheurl, input_data, function (data) {
                $("#output").text(data);
            });
            $("#output").text(urlpath);
        }

        $("#submit").bind("click", submitpath);

        // Ensure the path contains a '/' in the front and no spaces
        $('#cpath').keyup(function() {
            var input = $(this);
            input.val(input.val().replace(/ /g,''));
            var value = input.val();
            if (value[0] != '/' && value.length > 0) {
              input.val("/" + value);
              value = input.val();
            }
        });
    </script>
{% endblock %}