<style>
    #selector {
        padding: 0.5rem;
        border: 1px solid #ccc;
        height: 150px;
        width: 100%;
        font-size: 14px;
    }
    p {
        display: inline;
    }
    p#lower-text {
        display: inherit;
    }
    h1 {
        font-size: 200%;
    }
    h5 {
        display: inline;
        font-weight: bold;
    }
    @media (min-width: 900px) {
        p#lower-text {
            font-size: 130%;
        }
        h1 {
            font-size: 275%
        }
    }
    #pp-card {
        height: auto;
        font-family: Gotham A, Gotham B, Helvetica, Arial, sans;
        background-color: #f5f5f5;
        border-radius: 6px;
        border: 1px solid #e5e5e5;
        margin: 1em 0 1em 0;
    }
    .row {
        margin: 1em 0 1em 0;
    }
</style>
<form>
    <div class="row">
        <p>Results Found: {{ count }}</p>
    </div>
    <div class="row">
        <i>Click on an item below to view Details</i>
    </div>
    <select name="selector" id="selector" multiple="" onchange="getID()">
        {% for school in schools %}
            <optgroup label="{{ school }}">
                {% for form in filtered_forms %}
                    {% if school == form['school'] %}
                        <option value="{{ form['id'] }}">{{ form['title'] }}</option>#}
                    {% endif %}
                {% endfor %}
            </optgroup>
        {% endfor %}
    </select>
</form>
<div class="row">
<div id="details" hidden>
    <div>
        <h5>Title:</h5>
        <a id="title" target="_blank"></a>
    </div>
    <div>
        <h5>School:</h5>
        <p id="school"></p>
    </div>
    <div>
        <h5>Owner:</h5>
        <p id="owner"></p>
    </div>
</div>
    </div>
<div class="row">
    <div id="pp-card" class="col-sm-6 content" hidden>
        <h1 id="main" style="text-align: center"></h1>
        <p id="lower-text" style="text-align: center"></p>
    </div>
</div>
<script>
    function getID() {
        $('#spinner').show();
        $('#view').prop("disabled", true);
        var url = "{{ url_for('proof_points.ProofPointsView:grab_from_id') }}";
        var payload = {
            'id': $('#selector').val()
        };
        $.post(url, payload, function (data) {
            var json = JSON.parse(data);
            $('#details').show();
            setElements(json);
            $('#pp-card').show();
            $('#card-details').show();
            setCard(json);
            $('#spinner').hide();
            $('#view').prop("disabled", false);
        });
    }
    function setElements(json) {
        document.getElementById('title').href=json['cms_link'];
        $('#title').html(json['title']);
        $('#school').html(json['school']);
        $('#owner').html(json['owner']);
    }
    function setCard(json) {
        //Constructs the Card
        var mainStatement = json['text_before'] + json['number_field'] + json['text_field'] + json['text_after'];
        $('#main').html(mainStatement);
        $('#lower-text').html(json['text_below']);
    }
</script>
