<style>
    #selector {
        padding: 0.5rem;
        border: 1px solid #ccc;
        height: 150px;
        width: 100%;
        font-size: 14px;
    }
    p {
        display: inline;
    }
    h5 {
        display: inline;
        font-weight: bold;
    }
    #pp-card {
        height: auto;
        font-family: Gotham A, Gotham B, Helvetica, Arial, sans;
        background-color: #f5f5f5;
        border-radius: 6px;
        border: 1px solid #e5e5e5;
        margin: 1em 0 1em 0;
    }
    .row {
        margin: 1em 0 1em 0;
    }
</style>
<form>
    <p>Results Found: {{ count }}</p>
    <select name="selector" id="selector" multiple="" onchange="getID()">
        {% for form in filtered_forms %}
{#            <option value="{{ form['id'] }}">--Title-- {{ form['title'] }} --School-- {{ form['school'] }} --Owner-- {{ form['owner'] }}</option>#}
            <option value="{{ form['id'] }}">Title: {{ form['title'] }} | School: {{ form['school'] }}</option>
        {% endfor %}
    </select>
</form>
<div class="row">
<div id="details" hidden>
    <div>
        <h5>Title:</h5>
        <p id="title"></p>
    </div>
    <div>
        <h5>School:</h5>
        <p id="school"></p>
    </div>
    <div>
        <h5>Owner:</h5>
        <p id="owner"></p>
    </div>
    <div>
        <h5>Path:</h5>
        <p id="path"></p>
    </div>
    <div>
        <h5>ID:</h5>
        <p id="id"></p>
    </div>
    <div>
        <h5>CMS Link:</h5>
        <a id="link" target="_blank"></a>
    </div>
</div>
    </div>
<div class="row">
<div id="pp-card" class="col-sm-6 content" hidden>
    <h1 id="main" style="text-align: center"></h1>
    <h6 id="lower-text" style="text-align: center"></h6>
</div>
    </div>
<div class="row">
<div id="card-details" hidden>
    <div>
        <h5 id="h-text-before">Text-Before:</h5>
        <p id="text-before"></p>
    </div>
    <div>
        <h5 id="h-number-field">Number-Field:</h5>
        <p id="number-field"></p>
    </div>
    <div>
        <h5 id="h-text-field">Text-Field:</h5>
        <p id="text-field"></p>
    </div>
    <div>
        <h5 id="h-text-after">Text-After:</h5>
        <p id="text-after"></p>
    </div>
    <div>
        <h5 id="h-text-below">Text-Below:</h5>
        <p id="text-below"></p>
    </div>
</div>
    </div>
<script>
    function getID() {
        $('#spinner').show();
        $('#view').prop("disabled", true);
        var url = "{{ url_for('proof_points.ProofPointsView:grab_from_id') }}";
        var payload = {
            'id': $('#selector').val()
        };
        $.post(url, payload, function (data) {
            var json = JSON.parse(data);
            $('#details').show();
            setElements(json);
            $('#pp-card').show();
            $('#card-details').show();
            setCard(json);
            $('#spinner').hide();
            $('#view').prop("disabled", false);
        });
    }
    function setElements(json) {
        $('#title').html(json['title']);
        $('#school').html(json['school']);
        $('#owner').html(json['owner']);
        $('#path').html(json['path']);
        $('#id').html(json['id']);
        document.getElementById('link').href=json['cms_link'];
        $('#link').html(json['title']);
    }
    function setCard(json) {
        //Constructs the Card
        var mainStatement = json['text_before'] + json['number_field'] + json['text_field'] + json['text_after'];
        $('#main').html(mainStatement);
        $('#lower-text').html(json['text_below']);
        //Constructs the description
        showDetails();
        hideDetails(json);
        $('#text-below').html(json['text_below']);
        $('#text-before').html(json['text_before']);
        $('#number-field').html(json['number_field']);
        $('#text-field').html(json['text_field']);
        $('#text-after').html(json['text_after']);
    }
    function showDetails() {
        $('#h-text-below').show();
        $('#h-text-before').show();
        $('#h-number-field').show();
        $('#h-text-field').show();
        $('#h-text-after').show();
    }
    function hideDetails(json) {
        if(json['text_below'] === ''){
            $('#h-text-below').hide();
        }
        if(json['text_before'] === ''){
            $('#h-text-before').hide();
        }
        if(json['number_field'] === ''){
            $('#h-number-field').hide();
        }
        if(json['text_field'] === ''){
            $('#h-text-field').hide();
        }
        if(json['text_after'] === ''){
            $('#h-text-after').hide();
        }
    }
</script>